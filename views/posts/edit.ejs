<%- include('../partials/navbar.ejs') %>


<div class="container mt-20">
  <div class="row">
    <div class="col-md-12">
      <h3 class="mlp-30">Add new post</h3>
    </div>
  </div> 

<%- include('../partials/messages.ejs') %>

  <div class="row">
    <div class="col align-self-center">
    <form class="full-width" action="/posts/<%= post.id %>/update" method="post" enctype="multipart/form-data">
      <div class="form-group">
        <label for="title">Title</label>
        <input type="text" 
                class="form-control" 
                id="title" 
                name="title" 
                value="<%= typeof post.title != 'undefined' ? post.title : '' %>"
                >
        <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect2">Select Tags</label>
        <select multiple class="form-control" id="exampleFormControlSelect2" name="selectedTags">
          <% tags.forEach(tag => { %>
          <option value="<%= tag.id %>"
            <% if(selectedTagsId.includes(tag.id)) { %>
              selected
            <% } %>
            >
            <%= tag.name %>
          </option>
          <% }) %>
        </select>
      </div>
      <div class="form-group form-check">
      </div>
      <div class="form-group">
        <label for="postImage">Upload Image</label>
        <input type="file" class="form-control-file" id="postImage" name="postImage" accept='image/*' >
      </div>
      <div class="form-group">
        <label for="description">Description</label>
        <textarea class="form-control" rows="5" name="description" id="description" placeholder="Required example textarea" required>
          <%= typeof post.description != 'undefined' ? post.description : '' %></textarea>
        </textarea>  
      </div>
      <button type="submit" class="btn btn-primary">Submit</button>
    </form>     
    <br> 
    <a href="/dashboard" class="btn btn-dark">Cancel</a>
    </div>
  </div>


</div>